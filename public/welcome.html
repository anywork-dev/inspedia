<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inspedia - Welcome</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #303030;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 100%;
            margin: 0 auto;
        }

        /* Header */
        .header {
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #303030;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 700;
            color: #e5e5e5;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .user-avatar {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #fdff98, #e5e5e5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #303030;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .logout-button {
            background: none;
            border: none;
            color: #a5a5a5;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }

        .logout-button:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
        }

        .spacer-top {
            height: 3rem;
        }

        .icon-container {
            padding: 0.625rem;
            margin-bottom: 1rem;
        }

        .lightbulb-icon {
            width: 2.5rem;
            height: 2.5rem;
        }

        .welcome-section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
            margin-bottom: 1rem;
        }

        .welcome-text {
            display: flex;
            flex-direction: column;
            gap: 0.625rem;
            align-items: center;
        }

        .welcome-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #ffffff;
        }

        .welcome-description {
            font-size: 0.875rem;
            font-weight: 400;
            color: #ffffff;
            text-align: center;
            line-height: 1.5;
        }

        .categories-grid {
            padding: 0.625rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.625rem;
            justify-content: center;
        }

        .category-chip {
            background-color: #404040;
            border-radius: 0.5rem;
            padding: 0.625rem;
            opacity: 0.8;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .category-chip:hover {
            opacity: 1;
            background-color: #4a4a4a;
            transform: translateY(-2px);
        }

        .category-chip.selected {
            opacity: 1;
            background-color: #e5e5e5;
            color: #303030;
        }

        .category-chip.selected .category-text {
            color: #303030;
        }

        .category-text {
            font-size: 0.875rem;
            font-weight: 700;
            color: #ffffff;
        }

        .spacer-flex {
            flex: 1;
            min-height: 2rem;
        }

        .action-section {
            display: flex;
            flex-direction: column;
            gap: 0.875rem;
            width: 100%;
        }

        .search-input {
            background-color: #3a3a3a;
            padding: 0.625rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 2.75rem;
            border-radius: 0.25rem;
            border: none;
            outline: none;
        }

        .search-input input {
            background: transparent;
            border: none;
            outline: none;
            color: #a5a5a5;
            font-size: 0.875rem;
            font-family: 'Poppins', sans-serif;
            flex: 1;
        }

        .search-input input::placeholder {
            color: #a5a5a5;
        }

        .search-icon {
            width: 1.5rem;
            height: 1.5rem;
            flex-shrink: 0;
        }

        .start-button {
            background-color: #e5e5e5;
            padding: 0.625rem;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 2.75rem;
            border-radius: 0.25rem;
            cursor: pointer;
            border: none;
            width: 100%;
            transition: all 0.2s;
        }

        .start-button:hover {
            background-color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(229, 229, 229, 0.3);
        }

        .start-button:active {
            transform: translateY(0);
        }

        .start-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .start-button-text {
            color: #303030;
            font-size: 0.875rem;
            font-weight: 400;
        }

        /* Bottom Navigation */
        .bottom-nav {
            background-color: #272727;
            padding: 1rem 1.5rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 2.75rem;
        }

        .nav-icon {
            width: 2rem;
            height: 2rem;
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.2s;
        }

        .nav-icon:hover {
            opacity: 1;
        }

        .nav-icon.active {
            opacity: 1;
        }

        @media (min-width: 640px) {
            .app-container {
                max-width: 28rem;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="logo">INSPEDIA</div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="spacer-top"></div>
            
            <div class="icon-container">
                <svg class="lightbulb-icon" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M20 6.25C14.2067 6.25 9.58333 10.7783 9.58333 16.2767C9.58333 19.6183 10.95 22.4983 13.3917 24.2933C13.93 24.6883 14.3917 25.2783 14.5667 26.0267C14.7117 26.6417 14.8767 27.39 15.04 28.1833H18.75V26.3783C18.7498 26.1405 18.8174 25.9074 18.945 25.7067L20.2817 23.6067L17.2833 21.2533C17.0391 21.0619 16.8748 20.7864 16.8224 20.4805C16.77 20.1746 16.8333 19.8601 17 19.5983L18.945 16.545C19.0332 16.4065 19.1478 16.2866 19.2823 16.1924C19.4168 16.0982 19.5686 16.0313 19.7289 15.9957C19.8893 15.9601 20.0551 15.9565 20.2168 15.9849C20.3786 16.0134 20.5331 16.0735 20.6717 16.1617C20.8102 16.2499 20.93 16.3645 21.0243 16.499C21.1185 16.6335 21.1853 16.7853 21.2209 16.9456C21.2565 17.1059 21.2602 17.2717 21.2317 17.4335C21.2033 17.5952 21.1432 17.7498 21.055 17.8883L19.7183 19.9867L22.7167 22.3417C22.9605 22.5331 23.1245 22.8082 23.1768 23.1138C23.2292 23.4193 23.1662 23.7333 23 23.995L21.25 26.7433V28.1833H24.96C25.1233 27.39 25.2883 26.6417 25.4333 26.0267C25.61 25.2783 26.07 24.6883 26.6083 24.2933C29.0483 22.4983 30.4167 19.6167 30.4167 16.2767C30.4167 10.7783 25.7933 6.25 20 6.25ZM24.4817 30.6833H15.5167C15.7 31.745 15.845 32.75 15.89 33.4733C15.935 34.235 16.5033 34.9167 17.3417 35.0967L17.6683 35.1683C19.2017 35.5 20.7933 35.5 22.3283 35.1683L22.655 35.0967C23.4933 34.9167 24.0617 34.235 24.1083 33.4733C24.1517 32.7517 24.295 31.745 24.48 30.6833M7.08333 16.2767C7.08333 9.31667 12.9067 3.75 20 3.75C27.0933 3.75 32.9167 9.31833 32.9167 16.2767C32.9167 20.3167 31.2433 23.9883 28.0883 26.3067C27.982 26.3751 27.9034 26.479 27.8667 26.6C27.6289 27.6198 27.4099 28.6438 27.21 29.6717C26.905 31.235 26.6567 32.7517 26.605 33.625C26.4883 35.555 25.0683 37.1333 23.185 37.5417L22.8583 37.6117C20.975 38.0183 19.025 38.0183 17.1417 37.6117L16.815 37.5417C14.9317 37.135 13.5117 35.555 13.395 33.625C13.3433 32.7517 13.095 31.235 12.79 29.6717C12.59 28.6438 12.3711 27.6198 12.1333 26.6C12.0965 26.479 12.018 26.3751 11.9117 26.3067C8.75666 23.99 7.08333 20.3167 7.08333 16.2783" fill="#FDFF98"/>
                </svg>
            </div>

            <div class="welcome-section">
                <div class="welcome-text">
                    <div class="welcome-title">Welcome to INSPEDIA</div>
                    <div class="welcome-description">
                        Your personal space to discover, develop, and launch your next great idea. Select one of this area
                    </div>
                </div>

                <div class="categories-grid" id="categoriesGrid">
                    <div class="category-chip" data-category="AI">
                        <div class="category-text">ü§ñ AI</div>
                    </div>
                    <div class="category-chip" data-category="Startups">
                        <div class="category-text">üöÄ Startups</div>
                    </div>
                    <div class="category-chip" data-category="Software">
                        <div class="category-text">üíª Software</div>
                    </div>
                    <div class="category-chip" data-category="Design">
                        <div class="category-text">üé® Design</div>
                    </div>
                    <div class="category-chip" data-category="Productivity">
                        <div class="category-text">üìà Productivity</div>
                    </div>
                    <div class="category-chip" data-category="Climate Tech">
                        <div class="category-text">üåç Climate Tech</div>
                    </div>
                    <div class="category-chip" data-category="BioTech">
                        <div class="category-text">üî¨ BioTech</div>
                    </div>
                    <div class="category-chip" data-category="Developer Tools">
                        <div class="category-text">üõ†Ô∏è Developer Tools</div>
                    </div>
                </div>
            </div>

            <div class="spacer-flex"></div>

            <div class="action-section">
                <div class="search-input">
                    <input type="text" id="customTopic" placeholder="Want to be more specific...">
                    <svg class="search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.6 21L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16C7.68333 16 6.146 15.3707 4.888 14.112C3.63 12.8533 3.00067 11.316 3 9.5C2.99933 7.684 3.62867 6.14667 4.888 4.888C6.14733 3.62933 7.68467 3 9.5 3C11.3153 3 12.853 3.62933 14.113 4.888C15.373 6.14667 16.002 7.684 16 9.5C16 10.2333 15.8833 10.925 15.65 11.575C15.4167 12.225 15.1 12.8 14.7 13.3L21 19.6L19.6 21ZM9.5 14C10.75 14 11.8127 13.5627 12.688 12.688C13.5633 11.8133 14.0007 10.7507 14 9.5C13.9993 8.24933 13.562 7.187 12.688 6.313C11.814 5.439 10.7513 5.00133 9.5 5C8.24867 4.99867 7.18633 5.43633 6.313 6.313C5.43967 7.18967 5.002 8.252 5 9.5C4.998 10.748 5.43567 11.8107 6.313 12.688C7.19033 13.5653 8.25267 14.0027 9.5 14Z" fill="#A5A5A5"/>
                    </svg>
                </div>

                <button class="start-button" id="startButton">
                    <div class="start-button-text">Find My Next Idea</div>
                </button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-icon active" data-nav="discovery">
                <svg class="w-8 h-8 relative overflow-visible" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.23999 27.756C7.64444 27.8333 7.11199 27.6911 6.64266 27.3293C6.17332 26.9676 5.90266 26.4884 5.83066 25.892L4.19199 12.9413C4.12088 12.344 4.26888 11.8036 4.63599 11.32C5.0031 10.8364 5.48488 10.5671 6.08132 10.512L7.38399 10.4147V19.7947C7.38399 21.1244 7.8551 22.2604 8.79733 23.2027C9.73955 24.1449 10.8755 24.616 12.2053 24.616H24.452C24.4547 24.9271 24.3458 25.2 24.1253 25.4347C23.9049 25.6693 23.6338 25.8116 23.312 25.8613L8.23999 27.756ZM12.2053 21.9493C11.592 21.9493 11.0795 21.7436 10.668 21.332C10.2564 20.9204 10.0511 20.408 10.052 19.7947V6.15467C10.052 5.54044 10.2573 5.028 10.668 4.61733C11.0787 4.20667 11.5911 4.00089 12.2053 4H25.8453C26.4595 4 26.972 4.20578 27.3827 4.61733C27.7933 5.02889 27.9991 5.54133 28 6.15467V19.7947C28 20.408 27.7942 20.9204 27.3827 21.332C26.9711 21.7436 26.4587 21.9493 25.8453 21.9493H12.2053ZM16.992 15.9333L19.0253 14.7053L21.0587 15.9333C21.1751 15.9884 21.2818 15.984 21.3787 15.92C21.4747 15.8578 21.5004 15.7658 21.456 15.644L20.9 13.328L22.6853 11.7853C22.7787 11.708 22.8089 11.6169 22.776 11.512C22.7431 11.4071 22.6658 11.3436 22.544 11.3213L20.1947 11.1133L19.2747 8.93867C19.2302 8.82222 19.1471 8.764 19.0253 8.764C18.9035 8.764 18.8209 8.82178 18.7773 8.93733L17.8573 11.1133L15.508 11.32C15.3862 11.3431 15.3089 11.4071 15.276 11.512C15.2431 11.6169 15.2733 11.708 15.3667 11.7853L17.152 13.328L16.5947 15.644C16.5502 15.7649 16.5764 15.8573 16.6733 15.9213C16.7702 15.9836 16.8756 15.9876 16.992 15.9333Z" fill="#E5E5E5"/>
                </svg>
            </div>
            <div class="nav-icon" data-nav="collection">
                <svg class="w-8 h-8 relative overflow-visible" style="opacity: 0.5" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g opacity="0.5">
                        <path d="M16 24L10.4 26.4C9.51113 26.7778 8.66669 26.7058 7.86669 26.184C7.06669 25.6622 6.66669 24.9231 6.66669 23.9667V6.66667C6.66669 5.93333 6.92802 5.30578 7.45069 4.784C7.97335 4.26222 8.60091 4.00089 9.33335 4H22.6667C23.4 4 24.028 4.26133 24.5507 4.784C25.0734 5.30667 25.3342 5.93422 25.3334 6.66667V23.9667C25.3334 24.9222 24.9334 25.6613 24.1334 26.184C23.3334 26.7067 22.4889 26.7787 21.6 26.4L16 24ZM16 21.0667L22.6667 23.9333V6.66667H9.33335V23.9333L16 21.0667ZM16 6.66667H9.33335H22.6667H16Z" fill="#E5E5E5"/>
                    </g>
                </svg>
            </div>
            <div class="nav-icon" data-nav="workbench">
                <svg class="w-8 h-8 relative overflow-visible" style="opacity: 0.5" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g opacity="0.5">
                        <path d="M8.00002 24L4.93336 27.0667C4.51113 27.4889 4.02758 27.5835 3.48269 27.3507C2.9378 27.1178 2.6658 26.7009 2.66669 26.1V5.33332C2.66669 4.59999 2.92802 3.97243 3.45069 3.45066C3.97336 2.92888 4.60091 2.66755 5.33336 2.66666H26.6667C27.4 2.66666 28.028 2.92799 28.5507 3.45066C29.0734 3.97332 29.3342 4.60088 29.3334 5.33332V21.3333C29.3334 22.0667 29.0725 22.6947 28.5507 23.2173C28.0289 23.74 27.4009 24.0009 26.6667 24H8.00002ZM6.86669 21.3333H26.6667V5.33332H5.33336V22.8333L6.86669 21.3333Z" fill="#E5E5E5"/>
                    </g>
                </svg>
            </div>
            <div class="nav-icon" data-nav="profile">
                <svg style="opacity: 0.5" class="w-8 h-8 relative overflow-visible" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.80002 22.8C8.93336 21.9333 10.2 21.2502 11.6 20.7507C13 20.2511 14.4667 20.0009 16 20C17.5334 19.9991 19 20.2493 20.4 20.7507C21.8 21.252 23.0667 21.9351 24.2 22.8C24.9778 21.8889 25.5836 20.8555 26.0174 19.7C26.4511 18.5444 26.6676 17.3111 26.6667 16C26.6667 13.0444 25.628 10.5275 23.5507 8.44932C21.4734 6.3711 18.9565 5.33243 16 5.33332C13.0436 5.33421 10.5267 6.37332 8.44936 8.45066C6.37202 10.528 5.33336 13.0444 5.33336 16C5.33336 17.3111 5.55024 18.5444 5.98402 19.7C6.4178 20.8555 7.02313 21.8889 7.80002 22.8ZM16 17.3333C14.6889 17.3333 13.5831 16.8835 12.6827 15.984C11.7822 15.0844 11.3325 13.9787 11.3334 12.6667C11.3342 11.3547 11.7845 10.2489 12.684 9.34932C13.5836 8.44977 14.6889 7.99999 16 7.99999C17.3111 7.99999 18.4169 8.45021 19.3174 9.35066C20.2178 10.2511 20.6676 11.3564 20.6667 12.6667C20.6658 13.9769 20.216 15.0827 19.3174 15.984C18.4187 16.8853 17.3129 17.3351 16 17.3333ZM16 29.3333C14.1556 29.3333 12.4222 28.9831 10.8 28.2827C9.1778 27.5822 7.76669 26.6324 6.56669 25.4333C5.36669 24.2342 4.41691 22.8231 3.71736 21.2C3.0178 19.5769 2.66758 17.8435 2.66669 16C2.6658 14.1564 3.01602 12.4231 3.71736 10.8C4.41869 9.17688 5.36847 7.76577 6.56669 6.56666C7.76491 5.36755 9.17602 4.41777 10.8 3.71732C12.424 3.01688 14.1574 2.66666 16 2.66666C17.8427 2.66666 19.576 3.01688 21.2 3.71732C22.824 4.41777 24.2351 5.36755 25.4334 6.56666C26.6316 7.76577 27.5818 9.17688 28.284 10.8C28.9862 12.4231 29.336 14.1564 29.3334 16C29.3307 17.8435 28.9805 19.5769 28.2827 21.2C27.5849 22.8231 26.6351 24.2342 25.4334 25.4333C24.2316 26.6324 22.8205 27.5827 21.2 28.284C19.5796 28.9853 17.8462 29.3351 16 29.3333Z" fill="#E5E5E5"/>
                </svg>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script type="module">
        console.log('[Welcome] Welcome page loading...');

        // Check authentication
        console.log('[Welcome] Checking authentication...');
        if (!auth.protectRoute()) {
            console.log('[Welcome] Authentication check failed, redirecting...');
            // Will redirect to login
        } else {
            console.log('[Welcome] Authentication check passed, loading page...');
        }

        // State
        let selectedCategories = new Set();
        let customTopic = '';

        // DOM Elements
        const categoriesGrid = document.getElementById('categoriesGrid');
        const customTopicInput = document.getElementById('customTopic');
        const startButton = document.getElementById('startButton');
        const navIcons = document.querySelectorAll('.nav-icon');

        // Category selection
        categoriesGrid.addEventListener('click', (e) => {
            const chip = e.target.closest('.category-chip');
            if (!chip) return;

            const category = chip.dataset.category;
            
            if (selectedCategories.has(category)) {
                selectedCategories.delete(category);
                chip.classList.remove('selected');
            } else {
                selectedCategories.add(category);
                chip.classList.add('selected');
            }
        });

        // Custom topic input
        customTopicInput.addEventListener('input', (e) => {
            customTopic = e.target.value.trim();
        });

        // Start session
        startButton.addEventListener('click', () => {
            const sessionData = {
                categories: Array.from(selectedCategories),
                customTopic: customTopic,
                timestamp: new Date().toISOString()
            };

            // Store session data
            localStorage.setItem('current_session', JSON.stringify(sessionData));
            
            // Build URL with query parameters
            const params = new URLSearchParams();
            params.append('query', (customTopic ? customTopic : '') + Array.from(selectedCategories).join('+'));

            
            // Navigate to discovery page with query parameters
            const url = params.toString() ? `discovery?${params.toString()}` : 'discovery';
            window.location.href = url;
        });

        // Bottom navigation
        navIcons.forEach(icon => {
            icon.addEventListener('click', (e) => {
                const nav = e.currentTarget.dataset.nav;
                
                // Remove active class from all icons
                navIcons.forEach(i => i.classList.remove('active'));
                
                // Navigate based on selection
                switch(nav) {
                    case 'discovery':
                        // Already on welcome/discovery
                        break;
                    case 'collection':
                        window.location.href = 'collection.html';
                        break;
                    case 'workbench':
                        window.location.href = 'workbench.html';
                        break;
                    case 'profile':
                        window.location.href = 'profile.html';
                        break;
                }
            });
        });
    </script>
</body>
</html>
